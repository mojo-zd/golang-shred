## 分布式原理
CAP理论,常见的解决方式:2PC、3PC、TCC。e.g. 数据库的读写分离

### 分区容忍性
网络分区,可能由于网络问题主从之间不能进行通信了,任然需要对外提供服务. e.g. 主从网络不通
了,任然需要主从可以对外提供服务.
**分布式系统具备的基本能力**

### 一致性
写操作后的读操作可以读取最新数据状态,当数据分布在多个节点上,任意节点读取到的是最新的状态.

### 可用性
任何事务操作都可以得到响应, e.g. 主数据库提供写服务同时从数据库提供读服务

### CAP组合方式
1) AP 可用性、分区容忍性(最终一致性,实际使用中用的最多)
2) CP 一致性、分区容忍性(e.g. zookeeper)
3) CA 一致性、可用性(不是一个标准的分布式系统)

## BASE理论
满足基本可用(核心服务必须可用)、软状态(中间态 e.g. 支付中...)、最终一致性.

## 分布式事务解决方案
### 2PC(2阶段提交协议 P: prepare C: commit)
事务参与者, 事务管理器.
1) 准备阶段,事务管理器向参与者发送预处理准备消息(记录undo/redo日志)
2) 提交阶段, 负责提交或者回滚

#### XA方案
角色划分: AP(应用程序), TM(事务管理器), RM(资源管理器).
TM、RM通信接口规范叫XA.

问题: 资源锁定, 性能较差(两阶段都完成了才能释放资源)

#### Seata方案
基于XA演进而来,
TC: 事务协调器,收集事务信息维护全局事务运行状态.决定提交还是回滚
TM: 事务管理器
RM: 资源管理器
优点:
1) 无需长时间持有资源
2) 没有侵入性

### 分布式TCC


## 分布式事务
1) 单独服务操作不同数据源
2) 多服务间进行通信

## 分布式追踪
### Jaeger (Uber)
### Zipkin (Twitter)
### Skywalking
### Cat (大众点评)